# SFmail<br>
#信封分拣项目的主要src文件<br>
#第一次用github<br>
code70-76：建立执行末端与机器人基座的齐次坐标<br>
code78-84：末端与相机之间的齐次坐标，根据先前进行的手眼标定；将二者乘起来，就是相机与基座的转换关系。<br>
Code129-： 针对深度图，利用sobel算子先进行xy方向的梯度求解；再合并梯度；利用canny算子求轮廓，再进行膨胀操作，将轮廓边缘更好地连接起来，实际上并不能有效连接起来，但至少改善了一些；<br>
Code159-：寻找轮廓，将其存在contours容器中，之后定义一个空白画布用于画轮廓。针对每一个轮廓，寻找这些轮廓点的最小外接矩形，这样就可以得到一个理想的矩形。那么我们再对矩形进行筛选，根据矩形的长宽以及比例等，选出符合条件的矩形。矩形的中心pixelzhongxin就是吸盘吸取点，需要利用深度相机的外参将其转化为这点在相机下的三维坐标pointzhongxin；后面会对这个三维坐标再乘以相机与基座的关系，得到这点在基座下的坐标。<br>
Code219-263:这里是把深度图上的矩形对应转换到彩色图上，对于深度图的四个角点，需要经历从深度相机中拿到三维空间，深度相机与彩色相机转换、三维空间再进入彩色相机三个步骤，在这个过程中，需要用到深度值，而由于前面我们采用最小外接矩形，所以可能实际框比真实信封的框要大，所以把这个外接矩形向中心缩小一点，直到有了深度值，这就是代码224-244做的事。<br>
Code266-：这里首先把转换到彩色图上的矩形的x和y的最大值最小值找到，然后以(x_min,y_min)为左上角，(x_max,y_max)为右下角，提取或者叫裁剪这一部分，以方便后面进行特征识别与匹配。<br>
Code365-:然后就是利用信封正面作为模板，与提取到的图片进行特征匹配，设置一个阈值，匹配对大于阈值，认为是正面，否则为反面，根据识别到的正反将信封放到不同的位置。<br>
